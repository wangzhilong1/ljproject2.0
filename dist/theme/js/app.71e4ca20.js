(function(e){function t(t){for(var n,o,s=t[0],l=t[1],c=t[2],h=0,u=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(u.length)u.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,s=1;s<i.length;s++){var l=i[s];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var n={},r={app:0},a=[];function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"1a0b":function(e,t,i){},"2c79":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"markerContainer"}},["marker"===e.markMode?i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],style:{left:e.panelPosition().x+"px",top:e.panelPosition().y+"px"},attrs:{id:"createMerkerPanel"}},[i("el-container",{directives:[{name:"show",rawName:"v-show",value:!e.selectPanel,expression:"!selectPanel"}]},[i("el-header",[i("span",[e._v("添加标记")]),i("span",{staticClass:"closebtn iconfont icon-guanbi",on:{click:e.cancelMark}})]),i("el-container",[i("el-container",[i("el-main",{staticClass:"marker-main-class"},[e._v("\n            名称：\n            "),i("el-input",{ref:"nameinput",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.update(t)}},model:{value:e.markName,callback:function(t){e.markName=t},expression:"markName"}}),i("br"),e._v("描述：\n            "),i("el-input",{attrs:{type:"textarea"},model:{value:e.markRemark,callback:function(t){e.markRemark=t},expression:"markRemark"}})],1),i("el-aside",[i("img",{attrs:{src:e.selectedImage}}),i("br"),i("a",{attrs:{href:"#",id:"imageC"},on:{click:function(t){e.selectPanel=!0}}},[e._v("更换")])])],1),i("el-footer",[i("el-button",{attrs:{type:"danger",id:"cancelbtn",plain:"",size:"mini"},on:{click:e.cancelMark}},[e._v("删除")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini",id:"submitbtn"},on:{click:e.update}},[e._v("确定")])],1)],1)],1),i("el-container",{directives:[{name:"show",rawName:"v-show",value:e.selectPanel,expression:"selectPanel"}],staticClass:"image-list-class"},e._l(e.images,(function(t,n){return i("img",{key:n,attrs:{src:t},on:{click:function(i){return e.changeHandler(t)}}})})),0)],1):e._e(),"label"===e.markMode?i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],style:{left:e.panelPosition().x+"px",top:e.panelPosition().y+"px"},attrs:{id:"createLabelPanel"}},[i("el-input",{nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.update(t)}},model:{value:e.markName,callback:function(t){e.markName=t},expression:"markName"}}),i("el-button",{attrs:{size:"mini"},on:{click:e.update}},[e._v("确定")])],1):e._e(),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"file",id:"uploadhandler",accept:".json"},on:{change:e.importMarks}})])},r=[],a=(i("8e6e"),i("6b54"),i("456d"),i("7f7f"),i("ac4d"),i("8a81"),i("ac6a"),i("5df3"),i("f400"),i("75fc")),o=i("bd86"),s=i("cd53"),l=i("9944"),c=i("4ab0");function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u,p,g,m=window.Cesium,v=m.defined,f=l["b"].CVT,y=m.ScreenSpaceEventType.LEFT_CLICK,_=m.ScreenSpaceEventType.RIGHT_CLICK,M=m.ScreenSpaceEventType.MOUSE_MOVE,k={name:"cesiumMarkerViewer",data:function(){return{visible:!1,selectPanel:!1,markName:"",markRemark:"",images:[],markMode:"marker",defaultImage:s["a"].defaultStyle.image,selectedImage:s["a"].defaultStyle.image,popWinPosition:void 0,markerOptions:h({},s["a"].defaultLabelStyle,{},s["c"].defaultStyle),markerid:void 0,noImage:s["a"].defaultStyle.image}},computed:{},components:{},props:{extendImage:{type:Array,default:function(){return[]}}},directives:{focus:{bind:function(e){e.focus()},updated:function(e){e.focus()},inserted:function(e){e.focus()}}},mounted:function(){this.images=[this.defaultImage].concat(Object(a["a"])(this.extendImage)),g=new Map,this.selectedImage=this.defaultImage},methods:{init:function(e){if(e instanceof m.Viewer==0)throw new Error("viewer 不是一个有效的Cesium Viewer对象");if(u=e,this.cursorTip=new l["b"].CursorTip("左键标绘，右键结束.","marker-tip",e),this.cursorTip.visible=!1,e instanceof m.Viewer===!1)throw new Error("viewer不是一个有效的Cesium Viewer对象.");var t=new m.ScreenSpaceEventHandler(e.canvas),i=this;e.scene.postRender.addEventListener((function(){if(v(i.popWinPosition)){var t=f.cartesian2Pixel(i.popWinPosition,e),n=document.getElementById("popContainer");if(!n)return;n.style.left=t.x-100-2+"px",n.style.top=t.y-100+"px";var r=i.popWinPosition,a=e.camera.position,o=e.scene.globe.ellipsoid.cartesianToCartographic(a).height,s=e.scene.globe.ellipsoid.maximumRadius;o+=1*s,m.Cartesian3.distance(r,a)>o?n.style.display="none":n.style.display="block"}}));var n=function(t){var n=e.scene.pick(t.position);v(n)&&n.id instanceof m.Entity&&n.id.gvtype===c["a"].MARKER?(i.selectedMarker=g.get(n.id.gvid),i.popDiv?i.destroyPopPanle():i.createPopPanel()):i.destroyPopPanle()};t.setInputAction(n,y)},pick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"marker",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";this.markMode=e;var i=u;this.cursorTip.visible=!0;var n=new m.ScreenSpaceEventHandler(i.canvas);p=n;var r=this,a=this.generateId(),o=function(o){var s,l=f.pixel2Cartesian(o.position,i);m.defined(l)&&(s="marker"===e?r.createMarker(l):"label"===e?r.createLabel(l):"model"===e?r.createModel(l):r.createMarker(l),r.visible=!0,g.set(a,s),s.gvid=a,r.$emit("addEvent",s.gvid,s.gvname,s.gvtype),r.selectedMarker=s,r.activeMarker=s,r.markerid=a,r.cursorTip.visible=!1,"model"===e&&(r.activeMarker=void 0),"single"===t&&n.removeInputAction(y))},s=function(){n.removeInputAction(y),n.removeInputAction(_),n.destroy(),r.$emit("deleteEvent"),r.cursorTip.visible=!1,r.activeMarker=void 0},l=function(e){r.cursorTip.updatePosition(e.endPosition)};n.setInputAction(s,_),n.setInputAction(o,y),n.setInputAction(l,M)},createMarker:function(e){var t=this.markerOptions,i=new s["a"](u,{position:e,image:this.selectedImage},t);return i},panelPosition:function(){if(this.activeMarker){if("marker"===this.markMode){var e=this.activeMarker.graphic.position.getValue(),t=f.cartesian2Pixel(e,u),i=t.x>170?t.x-170:t.x+10,n=t.y>210?t.y-240:t.y+50;return{x:i,y:n}}var r=this.activeMarker.graphic.position.getValue(),a=f.cartesian2Pixel(r,u),o=a.x+10,s=a.y-25;return{x:o,y:s}}return{x:0,y:0}},createLabel:function(e){var t=this.markerOptions;t.position=e;var i=new s["b"](u,t);return i},createModel:function(e){var t=this.markerOptions;t.position=e;var i=new s["c"](u,t);return i},removeEventListener:function(){p&&(p.isDestroyed()||(p.destroy(),p.removeInputAction(y),p.removeInputAction(_),p.removeInputAction(M)))},stopPick:function(){this.removeEventListener(),this.activeMarker&&(this.activeMarker.destroy(),this.$emit("deleteEvent",this.activeMarker.gvid)),this.visible=!1,this.activeMarker=void 0},zoomTo:function(e){g.has(e)&&g.get(e).zoomTo()},edit:function(e){if(g.has(e)){var t=g.get(e);this.activeMarker=g.get(e),t.gvtype!==c["a"].MARKER&&t.gvtype!==c["a"].LABEL||(this.markName=this.activeMarker.gvname,this.markRemark=this.activeMarker.description,this.visible=!0),this.$emit("editEvent",this.activeMarker.type)}},drop:function(e){var t=g.get(e);t&&t.destroy(),g.delete(e)},rename:function(e,t){var i=g.get(e);i.gvname=t},select:function(e,t,i){if(v(t)){var n=g.get(t);v(n)&&(n.show=i)}if(v(e)){var r=g.values(),a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var d=l.value;d.gvtype===e&&(d.show=i)}}catch(h){o=!0,s=h}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}},destroyPopPanle:function(){this.popDiv&&(this.$el.removeChild(this.popDiv),this.popDiv=void 0)},createPopPanel:function(){if(v(this.selectedMarker)){this.popDiv&&this.destroyPopPanle();var e=document.createElement("div");e.id="popContainer",e.className="popWin-class";var t=this.selectedMarker.position;this.popWinPosition=t;var i=f.cartesian2Degrees(t,u);e.style.display="none";var n=document.createElement("span");n.innerText="名称:"+(this.selectedMarker.name||"未命名");var r=document.createElement("span");r.innerText="纬度:"+i.lon.toFixed(2)+"  纬度:"+i.lat.toFixed(2);var a=document.createElement("div");a.className="arrow";var o=document.createElement("span");o.className="iconfont icon-guanbi closebtn";var s=this;o.onclick=function(){s.$el.removeChild(s.popDiv),s.popDiv=void 0},e.appendChild(o),e.appendChild(n),e.appendChild(r),e.appendChild(a),this.popDiv=e,this.$el.appendChild(this.popDiv)}},import:function(e){if("POINT"!==e.geometry.type.toUpperCase())throw new Error("无效的数据类型.");var t,i=this.generateId();if(e.properties.gvtype===c["a"].LABEL){var n,r=s["b"].defaultStyle;r.position=(n=m.Cartesian3).fromDegrees.apply(n,Object(a["a"])(e.geometry.coordinates)),r.text=e.properties.name,t=new s["b"](u,r)}else{var o={lon:e.geometry.coordinates[0],lat:e.geometry.coordinates[1],height:e.geometry.coordinates[2]};t=s["a"].fromDegrees(u,o)}t.gvname=e.properties.name,t.gvid=i,g.set(i,t),this.$emit("addEvent",t.gvid,t.gvname||"未命名",t.gvtype)},export:function(e){var t=g.values(),i={type:"FeatureCollection",name:"graphic",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]},n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;l.type===e&&i.features.push(l.toGeoJson())}}catch(d){r=!0,a=d}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}var c=new Blob([JSON.stringify(i)],{type:""});window.saveAs(c,e+parseInt(m.getTimestamp())+".geojson")},setFont:function(e){this.markerOptions.font=e,this.activeMarker&&(this.activeMarker.font=e)},getFont:function(){if(this.activeMarker)return this.activeMarker.font},setColor:function(e){this.markerOptions.fillColor=e,this.activeMarker&&(this.activeMarker.color=e)},setLabel:function(e){for(var t=Object.keys(e),i=0,n=t;i<n.length;i++){var r=n[i];this.markerOptions[r]=e[r]}this.activeMarker&&this.activeMarker.setLabel(this.markerOptions)},setModel:function(e){this.markerOptions=h({},this.markerOptions,{},e),this.activeMarker&&(e.uri&&(this.activeMarker.uri=e.uri),e.color&&(this.activeMarker.color=e.color),void 0!=e.mode&&(this.activeMarker.model=e.mode),void 0!=e.mixed&&(this.activeMarker.mixed=e.mixed))},removeAll:function(){var e=g.values(),t=!0,i=!1,n=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.remove(),o.destroy()}}catch(s){i=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}g.clear()},cancelMark:function(){this.activeMarker&&this.activeMarker.destroy(),this.activeMarker=void 0,this.visible=!1,this.cursorTip.visible=!1,this.$emit("deleteEvent",this.markerid),this.markName="",this.markRemark="",g.delete(this.markerid),this.markerid=void 0,this.removeEventListener()},update:function(){this.activeMarker.updateText(this.markName,this.markRemark),this.visible=!1,this.cursorTip.visible=!1,this.$emit("updateEvent",this.activeMarker.gvid,this.activeMarker.gvname),this.markName="",this.markRemark="",this.activeMarker=void 0,this.removeEventListener()},changeHandler:function(e){this.selectedImage=e,this.activeMarker.updateImage(this.selectedImage),this.selectPanel=!1},generateId:function(){return(1e7*Math.random()).toString(16).substr(0,4)+"-"+(new Date).getTime()+"-"+Math.random().toString().substr(2,5)},importMarks:function(){}},watch:{}},w=k,b=(i("4866"),i("2877")),C=Object(b["a"])(w,n,r,!1,null,"2fc60486",null);t["a"]=C.exports},3015:function(e,t,i){"use strict";i("456d"),i("7f7f"),i("ac4d"),i("8a81"),i("6b54"),i("ac6a"),i("5df3"),i("f400");var n=i("d225"),r=i("b0b4"),a=i("cd53"),o=i("9944"),s=i("4ab0"),l=i("21a6"),c=window.Cesium,d=c.defined,h=window.console,u=c.ScreenSpaceEventType.LEFT_CLICK,p=c.ScreenSpaceEventType.RIGHT_CLICK,g=c.ScreenSpaceEventType.MOUSE_MOVE,m=c.ScreenSpaceEventType.LEFT_DOWN,v=c.ScreenSpaceEventType.LEFT_UP,f=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(n["a"])(this,e),t instanceof c.Viewer===!1)throw new Error("viewer不是一个有效的Cesium Viewer");this.viewer=t,this.options=i,this._heightReference="CLAMP_TO_GROUND",this._material=void 0,this._style={},this.graphicId=void 0,this.handler=new c.ScreenSpaceEventHandler(this.viewer.canvas),this.graphicType=void 0,this.positions=[],this.tip=new o["b"].CursorTip(""),this.tip.visible=!1,this.mode="ready",this.dragging=!1,this.addEventListener(),this.editManager=void 0,this.selectedNodeIndex=-1,this.graphicManager=new Map;var r=this;document.onkeydown=function(e){if("edit"===r.mode){var t=e||window.event||arguments.callee.caller.arguments[0];if(t&&46==t.keyCode)if(r.selectedNodeIndex>-1&&r.editManager)r.editManager.dropNode(r.selectedNodeIndex),r.highlightedNode(void 0,r.editManager.nodeGraphic),r.selectedNodeIndex=-1;else if(r.editManager){r.editManager.destroy(),r.graphicManager.delete(r.editManager.id),r.mode="end",r.tip.visible=!1;var i=new CustomEvent("destroyEvent",{detail:{gvid:r.editManager?r.editManager.gvid:void 0}});document.dispatchEvent(i),r.editManager=void 0}}}}return Object(r["a"])(e,[{key:"createPolyline",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a["f"].defaultStyle;this.graphicType=s["a"].POLYLINE;var t=this.generateId();e.positions=this.positions,/.*GROUND.*/.test(this._heightReference)?e.clampToGround=!0:e.clampToGround=!1,e.material=this.material||e.material,e.width=this.style.width||e.width;var i=new a["f"](this.viewer,e);this.tip.updateText("左键标绘，右键结束."),this.tip.visible=!0,i.gvid=t,i.heightReference=this.heightReference,this.graphicManager.set(t,i),this.graphicId=t,this.editManager=i;var n=new CustomEvent("addEvent",{detail:{gvid:i.gvid,gvtype:i.gvtype,gvname:i.gvname}});document.dispatchEvent(n);var r=this;return this.handler.setInputAction((function(e){r.tip&&r.tip.updatePosition(e.endPosition)}),g),i}},{key:"createPolygon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a["e"].defaultStyle;this.graphicType=s["a"].POLYGON;var t=this.generateId();this.graphicId=t,e.positions=this.positions,/.*GROUND.*/.test(this._heightReference)?e.perPositionHeight=!1:e.perPositionHeight=!0,e.material=this.material||e.material,e.outlineWidth=this.style.outlineWidth||e.outlineWidth,e.outlineColor=this.style.outlineColor||e.outlineColor;var i=new a["e"](this.viewer,e);i.gvid=t,i.heightReference=this.heightReference,this.tip.visible=!0,this.tip.updateText("左键标绘，右键结束."),this.graphicManager.set(t,i),this.editManager=i;var n=new CustomEvent("addEvent",{detail:{gvid:i.gvid,gvtype:i.gvtype,gvname:i.gvname}});document.dispatchEvent(n);var r=this;return this.handler.setInputAction((function(e){r.tip&&r.tip.updatePosition(e.endPosition)}),g),i}},{key:"generateId",value:function(){return(1e7*Math.random()).toString(16).substr(0,4)+"-"+(new Date).getTime()+"-"+Math.random().toString().substr(2,5)}},{key:"isKnownGraphic",value:function(e){return!(!(d(e)&&e.id instanceof c.Entity)||e.id.gvtype!==s["a"].POLYLINE&&e.id.gvtype!==s["a"].POLYGON&&e.id.gvtype!==s["a"].POINT)}},{key:"highlightedNode",value:function(e,t){var i=a["d"].selectedStyle,n=a["d"].defaultStyle,r=!0,o=!1,s=void 0;try{for(var l,c=t.graphic[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var d=l.value;d===e?a["d"].setStyle(d,i):a["d"].setStyle(d,n)}}catch(h){o=!0,s=h}finally{try{r||null==c.return||c.return()}finally{if(o)throw s}}}},{key:"addEventListener",value:function(){var e=this,t=this.viewer,i=function(i){if("edit"!==e.mode){if(e.graphicType==s["a"].POLYLINE||e.graphicType==s["a"].POLYGON){var n=o["a"].pixel2Cartesian(i.position,e.viewer);if(/.*MODEL.*/.test(e._heightReference)){if(!t.scene.pickPositionSupported)return void h.log("This browser does not support pickPosition.");n=t.scene.pickPosition(i.position)}0===e.graphicManager.get(e.graphicId).positions.length&&(e.handler.removeInputAction(g),e.handler.setInputAction(r,g)),d(n)&&e.graphicManager.has(e.graphicId)&&e.graphicManager.get(e.graphicId).addNode(n),e.mode="create"}}else{var a=e.editManager.nodeGraphic||e.editManager.outlineGraphic.nodeGraphic,c=t.scene.drillPick(i.position),u=!1,p=void 0,v=!0,f=!1,y=void 0;try{for(var _,M=c[Symbol.iterator]();!(v=(_=M.next()).done);v=!0){var k=_.value;if(u=e.isKnownGraphic(k),u&&k.id.gvtype===s["a"].POINT){p=k,e.handler.setInputAction(l,m),e.handler.setInputAction(r,g);break}}}catch(b){f=!0,y=b}finally{try{v||null==M.return||M.return()}finally{if(f)throw y}}if(p&&u)p.id.gvtype===s["a"].POINT?(e.selectedNodeIndex=a.contain(p.id),-1!==e.selectedNodeIndex&&e.highlightedNode(p.id,a)):(e.highlightedNode(p.id,e.editManager.nodeGraphic),e.selectedNodeIndex=-1);else{e.editManager&&e.editManager.stopEdit(),e.handler.removeInputAction(g),e.mode="end",e.selectedNodeIndex=-1,e.editManager=void 0,e.tip.visible=!1;var w=new CustomEvent("stopEdit");document.dispatchEvent(w)}}},n=function(){var t=e.graphicManager.get(e.graphicId);if("create"===e.mode&&t){t.stopEdit(),e.graphicType=void 0,e.graphicId=void 0,e.positions=[],e.mode="end",e.tip.visible=!1,e.editManager=void 0;var i=new CustomEvent("stopEdit");document.dispatchEvent(i)}e.handler.removeInputAction(g)},r=function(i){var n=o["a"].pixel2Cartesian(i.endPosition,e.viewer);if(/.*MODEL.*/.test(e._heightReference)){if(!t.scene.pickPositionSupported)return void h.log("This browser does not support pickPosition.");n=t.scene.pickPosition(i.endPosition)}d(n)&&(e.tip.updatePosition(i.endPosition),"create"===e.mode?(e.positions.length>1&&e.graphicManager.get(e.graphicId).popNode(),e.positions.length>0&&e.graphicManager.get(e.graphicId).addNode(n)):"edit"==e.mode&&e.dragging&&-1!==e.selectedNodeIndex&&e.editManager.updateNode(e.selectedNodeIndex,n))},l=function(i){e.handler.setInputAction(c,v);var n=t.scene.drillPick(i.position),r=!1,o=!0,s=!1,l=void 0;try{for(var d,h=n[Symbol.iterator]();!(o=(d=h.next()).done);o=!0){var u=d.value;a["d"].isCesiumPoint(u)&&(r=!0)}}catch(p){s=!0,l=p}finally{try{o||null==h.return||h.return()}finally{if(s)throw l}}0!=r&&"edit"===e.mode&&-1!=e.selectedNodeIndex&&(e.dragging=!0,t.scene.screenSpaceCameraController.enableRotate=!1)},c=function(){e.dragging=!1,t.scene.screenSpaceCameraController.enableRotate=!0,e.handler.removeInputAction(v),e.handler.removeInputAction(m)};this.handler.setInputAction(i,u),this.handler.setInputAction(n,p)}},{key:"rename",value:function(e,t){var i=this.graphicManager.get(e);d(i)&&(i.gvname=t)}},{key:"has",value:function(e){return this.graphicManager.has(e)}},{key:"select",value:function(e,t,i){if(d(t)){var n=this.graphicManager.get(t);n&&(n.show=i)}if(d(e)){var r=this.graphicManager.values(),a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var h=l.value;h.gvtype===e&&(h.show=i)}}catch(u){o=!0,s=u}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}}},{key:"edit",value:function(e){var t=this,i=t.graphicManager.get(e);if(this.handler.setInputAction((function(e){t.tip.updatePosition(e.endPosition)}),g),t.graphicId=e,d(i)){t.mode="edit",i.startEdit(),t.tip.visible=!0,t.tip.updateText("拖动节点编辑，按del删除."),t.editManager=i;var n=new CustomEvent("startEdit",{detail:{graphicType:t.editManager.type,material:t.editManager.material,width:t.editManager.width,outline:t.editManager.outline,outlineColor:t.editManager.outlineColor,outlineWidth:t.editManager.outlineWidth,heightReference:t.editManager.heightReference}});document.dispatchEvent(n)}}},{key:"export",value:function(e){var t={type:"FeatureCollection",name:"graphic",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]},i=this.graphicManager.values(),n=!0,r=!1,a=void 0;try{for(var o,s=i[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var d=o.value;d.type===e&&t.features.push(d.toGeoJson())}}catch(u){r=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}var h=new Blob([JSON.stringify(t)],{type:""});Object(l["saveAs"])(h,e+parseInt(c.getTimestamp())+".geojson")}},{key:"import",value:function(e){var t,i,n=this.generateId(),r=[];if(e.geometry.type.toUpperCase()==="LineString".toUpperCase()){i=e.geometry.coordinates;var o=!0,s=!1,l=void 0;try{for(var c,d=i[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value;r.push({lon:h[0],lat:h[1],height:h[2]})}}catch(_){s=!0,l=_}finally{try{o||null==d.return||d.return()}finally{if(s)throw l}}t=a["f"].fromDegrees(this.viewer,r)}else{if("POLYGON"!==e.geometry.type.toUpperCase())throw new Error("不能识别的数据源.");i=e.geometry.coordinates[0];var u=!0,p=!1,g=void 0;try{for(var m,v=i[Symbol.iterator]();!(u=(m=v.next()).done);u=!0){var f=m.value;r.push({lon:f[0],lat:f[1],height:f[2]})}}catch(_){p=!0,g=_}finally{try{u||null==v.return||v.return()}finally{if(p)throw g}}t=a["e"].fromDegrees(this.viewer,r)}t.gvid=n,t.gvname=e.properties.name,this.graphicManager.set(n,t);var y=new CustomEvent("addEvent",{detail:{gvid:t.gvid,gvtype:t.gvtype,gvname:t.gvname||"未命名"}});document.dispatchEvent(y)}},{key:"removeEventListener",value:function(){this.handler.removeInputAction(u),this.handler.removeInputAction(g),this.handler.removeInputAction(p),this.handler.removeInputAction(m),this.handler.removeInputAction(v)}},{key:"removeAll",value:function(){var e=this.graphicManager.values(),t=!0,i=!1,n=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.remove(),o.destroy()}}catch(s){i=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}this.graphicManager.clear(),this.tip.visible=!1}},{key:"destroy",value:function(){this.activeManager=void 0,this.graphicManager=void 0,this.editManager=void 0,this.removeEventListener(),this.handler.isDestroyed||(this.handler.destroy(),this.handler=void 0)}},{key:"destroyManager",value:function(){var e=this.editManager,t=new CustomEvent("destroyEvent",{detail:{gvid:e?e.gvid:void 0}});e&&("edit"===this.mode?e&&e.stopEdit():(e&&e.destroy(),this.graphicManager.delete(this.graphicId)),this.editManager=void 0),this.graphicId=void 0,this.handler.removeInputAction(g),document.dispatchEvent(t)}},{key:"heightReference",get:function(){return this._heightReference},set:function(e){if(this._heightReference=e,this.editManager)if(this.editManager.heightReference=e,"POLYLINE"===this.editManager.type)this.editManager.graphic.polyline.clampToGround=/.*GROUND.*/.test(e),this.editManager.options.polyline.clampToGround=/.*GROUND.*/.test(e);else if("POLYGON"===this.editManager.type){var t=this.editManager.graphic,i=this.editManager.options;/.*GROUND.*/.test(e)?(t.polygon.perPositionHeight=!1,this.editManager.outline&&(this.editManager.outlineGraphic.graphic.polyline.clampToGround=!0),i.polygon.perPositionHeight=!1):(t.polygon.perPositionHeight=!0,this.editManager.outline&&(this.editManager.outlineGraphic.graphic.polyline.clampToGround=!1),i.polygon.perPositionHeight=!0)}}},{key:"material",get:function(){return this._material},set:function(e){this._material=e,this.editManager&&("POLYLINE"===this.editManager.type?(this.editManager.graphic.polyline.material=this._material,this.editManager.options.polyline.material=this._material):"POLYGON"===this.editManager.type&&(this.editManager.graphic.polygon.material=this._material,this.editManager.options.polygon.material=this._material))}},{key:"style",get:function(){return this._style},set:function(e){if(this._style=e,this.editManager){for(var t=Object.keys(e),i=0,n=t;i<n.length;i++){var r=n[i];"POLYLINE"===this.editManager.type?(this.editManager.graphic.polyline[r]=e[r],this.editManager.options.polyline[r]=e[r]):"POLYGON"===this.editManager.type&&("outline"!==r&&(this.editManager.graphic.polygon[r]=e[r]),this.editManager.options.polygon[r]=e[r])}"POLYGON"===this.editManager.type&&(this.editManager.outlineStyle=e)}}}]),e}();t["a"]=f},"312d":function(e,t,i){},"32c8":function(e,t,i){},"3a10":function(e,t,i){},"3a1e":function(e,t,i){},"45ea":function(e,t,i){"use strict";var n=i("8608"),r=i.n(n);r.a},4866:function(e,t,i){"use strict";var n=i("3a1e"),r=i.n(n);r.a},"4ab0":function(e,t,i){"use strict";var n=function(){function e(){}return e.MARKER=0,e.POINT=5,e.POLYLINE=1,e.POLYGON=2,e.LABEL=3,e.MODEL=4,e}();t["a"]=n},5330:function(e,t,i){},"53bd":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),r=i("5c96"),a=i.n(r);i("0fae");n["default"].use(a.a);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("layout")],1)},s=[],l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("earthViewer"),i("cesiumDrawViewer",{ref:"marker",attrs:{extendMarkerImage:e.imags}})],1)},c=[],d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fullSize",staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"full-container",style:e.viewStyle,attrs:{id:"cesiumContainer"}}),e._m(0)])},h=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"loadingOverlay"}},[i("h1",[e._v("Loading...")])])}],u={name:"EarthViewer",viewerProperty:{},props:{viewStyle:{},viewerProperty:{},dropBackground:{default:!1}},components:{},data:function(){return{viewer:null}},computed:{},mounted:function(){var e=window.Cesium,t=this;for(var i in t.viewerDefaultProperty={animation:!1,timeline:!1,geocoder:!1,homeButton:!1,navigationHelpButton:!1,baseLayerPicker:!1,fullscreenElement:"cesiumContainer",fullscreenButton:!1,shouldAnimate:!0,infoBox:!1,selectionIndicator:!1,sceneModePicker:!1,shadows:!1,skyAtmosphere:!1,imageryProvider:new e.UrlTemplateImageryProvider({url:"http://www.google.cn/maps/vt?lyrs=s@800&x={x}&y={y}&z={z}",tilingScheme:new e.WebMercatorTilingScheme,minimumLevel:1,maximumLevel:20}),terrainProvider:e.createWorldTerrain()},e.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwYTBiYzJiMy1hMWYzLTQ4MWMtOWI5ZC1lYTI3MjEwNjUwZjkiLCJpZCI6ODMxOSwic2NvcGVzIjpbImFzciIsImdjIl0sImlhdCI6MTU1MTc0OTk5OX0.CVjmJ3X9IL_jjuT1dsV75dGhUPEAz6mH2zVLmXZHlrM",t.viewerProperty)t.viewerDefaultProperty[i]=t.viewerProperty[i];var n=new e.Viewer("cesiumContainer",{animation:!1,timeline:!1,geocoder:!1,homeButton:!1,navigationHelpButton:!1,baseLayerPicker:!1,fullscreenElement:"cesiumContainer",fullscreenButton:!1,shouldAnimate:!0,infoBox:!1,selectionIndicator:!1,sceneModePicker:!1,shadows:!1,skyAtmosphere:!1,imageryProvider:new e.UrlTemplateImageryProvider({url:"http://www.google.cn/maps/vt?lyrs=s@800&x={x}&y={y}&z={z}",tilingScheme:new e.WebMercatorTilingScheme,minimumLevel:1,maximumLevel:20}),terrainProvider:e.createWorldTerrain()});window.cesiumViewer=n;var r=document.getElementsByClassName("cesium-widget-credits");r[0].parentElement.removeChild(r[0]),n.cesiumWidget.screenSpaceEventHandler.removeInputAction(e.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),n.scene.postProcessStages.fxaa.enabled=!1,n.camera.flyTo({destination:e.Cartesian3.fromDegrees(116.4,39.9,15e6),duration:0})},methods:{}},p=u,g=(i("aa38"),i("a01b"),i("2877")),m=Object(g["a"])(p,d,h,!1,null,"9c4eead6",null),v=m.exports,f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],attrs:{id:"drawtoolPanel"}},[i("el-container",[i("el-header",{attrs:{id:"drawtoolHead"}},[i("span",[e._v("基础标绘")]),i("span",{staticClass:"closebtn iconfont icondelete",on:{click:function(t){return e.$emit("closeEvent")}}})]),i("el-main",{staticClass:"graphic-draw-main"},[i("ul",[i("li",[i("i",{staticClass:"iconfont iconmarker icon-class",class:{"selected-graphic":e.menuSelected["MARKER"]},attrs:{title:"添加标记"},on:{click:function(t){return e.menuAction("MARKER")}}}),i("span",{class:{"selected-graphic":e.menuSelected["MARKER"]},on:{click:function(t){return e.menuAction("MARKER")}}},[e._v("标记")])]),i("li",[i("i",{staticClass:"iconfont iconpolyline icon-class",class:{"selected-graphic":e.menuSelected["POLYLINE"]},attrs:{title:"添加线段"},on:{click:function(t){return e.menuAction("POLYLINE")}}}),i("span",{class:{"selected-graphic":e.menuSelected["POLYLINE"]},on:{click:function(t){return e.menuAction("POLYLINE")}}},[e._v("折线")])]),i("li",[i("i",{staticClass:"iconfont iconpolygon icon-class",class:{"selected-graphic":e.menuSelected["POLYGON"]},attrs:{title:"添加多边形"},on:{click:function(t){return e.menuAction("POLYGON")}}}),i("span",{class:{"selected-graphic":e.menuSelected["POLYGON"]},on:{click:function(t){return e.menuAction("POLYGON")}}},[e._v("多边形")])]),i("li",[i("i",{staticClass:"iconfont iconlabel icon-class",class:{"selected-graphic":e.menuSelected["LABEL"]},attrs:{title:"添加文字"},on:{click:function(t){return e.menuAction("LABEL")}}}),i("span",{class:{"selected-graphic":e.menuSelected["LABEL"]},on:{click:function(t){return e.menuAction("LABEL")}}},[e._v("文字")])]),e.extendMarkerModel.length?i("li",[i("i",{staticClass:"iconfont iconmodel icon-class",class:{"selected-graphic":e.menuSelected["MODEL"]},attrs:{title:"添加模型"},on:{click:function(t){return e.menuAction("MODEL")}}}),i("span",{class:{"selected-graphic":e.menuSelected["MODEL"]},on:{click:function(t){return e.menuAction("MODEL")}}},[e._v("模型")])]):e._e(),i("li",[i("i",{staticClass:"iconfont iconlayer icon-class",class:{"selected-graphic":e.layerManagerVisible},attrs:{title:"图层管理"},on:{click:function(t){e.layerManagerVisible=!e.layerManagerVisible}}}),i("span",{class:{"selected-graphic":e.layerManagerVisible},on:{click:function(t){e.layerManagerVisible=!e.layerManagerVisible}}},[e._v("图层")])])])])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}],staticClass:"graphic-edit"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuSelected["MARKER"],expression:"menuSelected['MARKER']"}],staticClass:"marker-edit-class edit-class"},[i("el-color-picker",{attrs:{id:"markerColor","show-alpha":"",size:"mini"},model:{value:e.markerColor,callback:function(t){e.markerColor=t},expression:"markerColor"}}),i("el-select",{attrs:{size:"mini","allow-create":"",filterable:"",title:"字号","default-first-option":"",placeholder:"请选择"},model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}},e._l(e.fontSizeList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.markerOptionsVisible,callback:function(t){e.markerOptionsVisible=t},expression:"markerOptionsVisible"}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请在此定义LabelGraphic"},model:{value:e.markerOption,callback:function(t){e.markerOption=t},expression:"markerOption"}}),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.markerOption="",e.markerOptionsVisible=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.setLabel}},[e._v("确定")])],1)],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuSelected["POLYLINE"],expression:"menuSelected['POLYLINE']"}],staticClass:"polyline-edit-class edit-class"},[i("el-color-picker",{attrs:{title:"颜色",id:"lineColor","show-alpha":"",size:"mini"},model:{value:e.lineColor,callback:function(t){e.lineColor=t},expression:"lineColor"}}),i("el-select",{staticClass:"width-selector",attrs:{size:"mini",title:"线宽","allow-create":"",filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:e.lineWidth,callback:function(t){e.lineWidth=t},expression:"lineWidth"}},e._l(e.lineWidthList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("el-select",{staticClass:"style-selector",attrs:{size:"mini",title:"直线样式","default-first-option":"",placeholder:"请选择"},model:{value:e.lineStyle,callback:function(t){e.lineStyle=t},expression:"lineStyle"}},e._l(e.lineStyleList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),i("el-select",{staticClass:"type-selector",attrs:{size:"mini",title:"直线类型","default-first-option":"",placeholder:"请选择"},model:{value:e.graphicHeight,callback:function(t){e.graphicHeight=t},expression:"graphicHeight"}},e._l(e.heightList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuSelected["POLYGON"],expression:"menuSelected['POLYGON']"}],staticClass:"polygon-edit-class edit-class"},[i("el-color-picker",{attrs:{title:"填充色",id:"polygonColor","show-alpha":"",size:"mini"},model:{value:e.polygonColor,callback:function(t){e.polygonColor=t},expression:"polygonColor"}}),i("el-select",{staticClass:"type-selector",attrs:{size:"mini",title:"多边形类型","default-first-option":"",placeholder:"请选择"},model:{value:e.graphicHeight,callback:function(t){e.graphicHeight=t},expression:"graphicHeight"}},e._l(e.heightList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),i("i",{staticClass:"iconfont iconoutline border-btn",class:{"outline-selected":e.outline},attrs:{title:"边框"},on:{click:function(t){e.outline=!e.outline}}}),i("el-color-picker",{directives:[{name:"show",rawName:"v-show",value:e.outline,expression:"outline"}],attrs:{title:"边框充色",id:"outlineColor","show-alpha":"",size:"mini"},model:{value:e.outlineColor,callback:function(t){e.outlineColor=t},expression:"outlineColor"}}),i("el-select",{directives:[{name:"show",rawName:"v-show",value:e.outline,expression:"outline"}],staticClass:"width-selector",attrs:{size:"mini",title:"边框宽度","allow-create":"",filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:e.outlineWidth,callback:function(t){e.outlineWidth=t},expression:"outlineWidth"}},e._l(e.lineWidthList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuSelected["LABEL"],expression:"menuSelected['LABEL']"}],staticClass:"label-edit-class edit-class"},[i("el-select",{staticClass:"font-selector",attrs:{"allow-create":"",filterable:"",size:"mini",title:"字体","default-first-option":"",placeholder:"请选择"},model:{value:e.fontFamily,callback:function(t){e.fontFamily=t},expression:"fontFamily"}},e._l(e.fontList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("el-select",{staticClass:"size-selector",attrs:{size:"mini","allow-create":"",filterable:"",title:"字号","default-first-option":"",placeholder:"请选择"},model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}},e._l(e.fontSizeList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("el-color-picker",{attrs:{title:"颜色",id:"labelColor","show-alpha":"",size:"mini"},model:{value:e.markerColor,callback:function(t){e.markerColor=t},expression:"markerColor"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuSelected["MODEL"],expression:"menuSelected['MODEL']"}],staticClass:"model-edit-class edit-class"},[i("el-popover",{attrs:{placement:"bottom",id:"model-select",width:"160"},model:{value:e.modelSelectPanelvisible,callback:function(t){e.modelSelectPanelvisible=t},expression:"modelSelectPanelvisible"}},[i("div",{staticClass:"model-select-panel"},e._l(e.extendMarkerModel,(function(t){return i("img",{key:t.id,attrs:{title:t.name,src:e.modelThumb(t),onerror:e.defaultImage},on:{click:function(i){return e.selectModel(t)}}})})),0),i("i",{staticClass:"iconfont icon-sanweimoxing model-selector-trigger",attrs:{slot:"reference",title:"选择模型"},slot:"reference"})]),i("el-select",{attrs:{size:"mini",title:"模式","default-first-option":"",placeholder:"请选择"},model:{value:e.modelMode,callback:function(t){e.modelMode=t},expression:"modelMode"}},e._l(e.modelModeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),i("el-color-picker",{attrs:{title:"颜色",id:"modelColor","show-alpha":"",size:"mini"},model:{value:e.modelColor,callback:function(t){e.modelColor=t},expression:"modelColor"}}),i("el-slider",{directives:[{name:"show",rawName:"v-show",value:"Mix"===e.modelMode,expression:"modelMode==='Mix'"}],attrs:{title:"混合度",min:0,max:1,step:.1,"show-tooltip":!0},model:{value:e.modelMixed,callback:function(t){e.modelMixed=t},expression:"modelMixed"}})],1)]),i("MarkerViewer",{ref:"markerManager",attrs:{extendImage:e.extendMarkerImage},on:{deleteEvent:e.deleteMarker,editEvent:e.editMarker,addEvent:e.addMarker,updateEvent:e.updateMarker}}),i("layerManager",{directives:[{name:"show",rawName:"v-show",value:e.layerManagerVisible,expression:"layerManagerVisible"}],ref:"layerManager",staticClass:"layer-manager-class",class:{"edit-layer-manager-class":e.editMode},on:{locate:e.locateGraphic,edit:e.editGraphic,delete:e.deleteGraphic,rename:e.renameGraphic,select:e.selectGraphic,clear:e.clearGraphic,close:e.closeLayerManager,import:e.importGraphic,export:e.exportGraphic}}),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"file",id:"graphicuploadhandler",accept:".geojson, .shp"},on:{change:e.importfp}})],1)},y=[],_=i("e167"),M=_["a"],k=(i("cb32"),i("45ea"),Object(g["a"])(M,f,y,!1,null,"3be13f62",null)),w=k.exports,b=window.Cesium,C={data:function(){return{drawHelper:"",viewerMounted:!1,drawviewerShow:!0,imags:["./static/images/markers/1.png","./static/images/markers/2.png","./static/images/markers/3.png","./static/images/markers/4.png","./static/images/markers/5.png","./static/images/markers/6.png","./static/images/markers/7.png","./static/images/markers/8.png","./static/images/markers/5.png","./static/images/markers/6.png"],model:[{id:"model0",name:"木塔",url:"static/model/Wood_Tower.gltf"},{id:"model1",name:"人",url:"static/model/Cesium_Man.gltf"}]}},components:{earthViewer:v,cesiumDrawViewer:w},props:{},computed:{},beforeMount:function(){},mounted:function(){var e=window.cesiumViewer,t=new b.Cesium3DTileset({url:"static/Photogrammetry/tileset.json"});this.$refs.marker.init(e),t.readyPromise.then((function(t){e.scene.primitives.add(t),e.camera.viewBoundingSphere(t.boundingSphere)}))},methods:{},watch:{}},E=C,O=(i("9a8d"),Object(g["a"])(E,l,c,!1,null,"2c0e90a4",null)),P=O.exports,L={name:"app",components:{layout:P}},x=L,A=(i("5c0b"),Object(g["a"])(x,o,s,!1,null,null,null)),I=A.exports;i("3a10");n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(I)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";var n=i("53bd"),r=i.n(n);r.a},"5eae":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"layer-manager-box",attrs:{id:"layer-manager-box"}},[i("div",{staticClass:"layer-manager-header",attrs:{id:"layer-manager-header"}},[i("i",{staticClass:"iconfont icon-guanbi1"}),i("span",[e._v("标绘清单")]),i("span",{staticClass:"closebtn iconfont icon-guanbi",on:{click:e.closeLayerManaer}})]),i("div",{staticClass:"layer-manager-tools"},[i("span",{staticClass:"el-dropdown-link",on:{click:e.importHandler}},[e._m(0)]),i("el-dropdown",{attrs:{trigger:"click"},on:{command:e.exportHandler}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"iconfont iconexport action-icon-class"},[i("span",[e._v("导出")])])]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{staticClass:"iconfont iconmarker",attrs:{command:"MARKER"}},[e._v("标记")]),i("el-dropdown-item",{staticClass:"iconfont iconpolyline",attrs:{command:"POLYLINE"}},[e._v("线")]),i("el-dropdown-item",{staticClass:"iconfont iconpolygon",attrs:{command:"POLYGON"}},[e._v("多边形")]),i("el-dropdown-item",{staticClass:"iconfont iconlabel",attrs:{command:"LABEL"}},[e._v("书签")])],1)],1),i("i",{staticClass:"iconfont iconremove action-icon-last-class",on:{click:e.removeAll}},[i("span",[e._v("清空")])])],1),i("div",{staticClass:"graphic-draw-layer-manager-class",attrs:{id:"layerTree"}},[i("el-tree",{ref:"tree",attrs:{data:e.json,"show-checkbox":"","node-key":"id","default-expanded-keys":["marker","polyline","polygon"]},on:{check:e.checkAction},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var n=t.data;return i("span",{staticClass:"custom-tree-node"},[n.edit?i("el-input",{nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.renameAction(n)}},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}}):i("i",{staticClass:"action-item",class:n.icon}),i("span",{staticClass:"node-name action-item"},[e._v(e._s(n.text))]),n.children?e._e():i("span",{staticClass:"action-class"},[i("i",{staticClass:"iconfont iconlocate action-item",on:{click:function(t){return e.locate(n.id)}}}),i("i",{staticClass:"iconfont iconrename action-item",on:{click:function(t){return e.rename(n)}}}),i("i",{staticClass:"iconfont iconedit action-item",on:{click:function(t){return e.edit(n.id)}}}),i("i",{staticClass:"iconfont icondelete action-item",on:{click:function(t){return e.drop(n.id)}}})])],1)}}])})],1)])},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("i",{staticClass:"iconfont iconimport action-icon-class"},[i("span",[e._v("导入")])])}],a=(i("ac4d"),i("8a81"),i("6762"),i("2fdb"),i("ac6a"),i("5df3"),i("f400"),{data:function(){return{markerTree:new Map,polylineTree:new Map,polygonTree:new Map,labelTree:new Map,modelTree:new Map,renameNodeStatus:!1,checked:[],newName:"",json:[{id:"marker",text:"标记",type:"marker",icon:"iconfont iconmarker",children:[]},{id:"polyline",text:"线",type:"polyline",icon:"iconfont iconpolyline",children:[]},{id:"polygon",text:"多边形",type:"polygon",icon:"iconfont iconpolygon",children:[]},{id:"label",text:"文字",type:"label",icon:"iconfont iconlabel",children:[]},{id:"model",icon:"iconfont iconmodel",text:"模型",type:"model",children:[]}]}},mounted:function(){},computed:{},methods:{checkAction:function(e,t){t.checkedKeys.includes(e.id)?this.$emit("select",e.id,!0):this.$emit("select",e.id,!1)},locate:function(e){this.$emit("locate",e)},rename:function(e,t,i){if(e)this.$set(e,"edit",!0),this.newName=e.text;else{var n=!0,r=!1,a=void 0;try{for(var o,s=this.json[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value,c=!0,d=!1,h=void 0;try{for(var u,p=l.children[Symbol.iterator]();!(c=(u=p.next()).done);c=!0){var g=u.value;g.id===t&&(g.text=i)}}catch(m){d=!0,h=m}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}}}catch(m){r=!0,a=m}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}}},renameAction:function(e){e.edit=!1,this.$emit("rename",e.id,this.newName),e.text=this.newName},edit:function(e){this.$emit("edit",e)},drop:function(e){var t=this;this.$emit("delete",e);var i=this.checked.indexOf(e);e>-1&&this.checked.splice(i,1),this.$nextTick((function(){t.$refs.tree.setCheckedKeys(t.checked)}));var n=!0,r=!1,a=void 0;try{for(var o,s=this.json[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value,c=0,d=!0,h=!1,u=void 0;try{for(var p,g=l.children[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var m=p.value;if(m.id===e){l.children.splice(c,1);break}c++}}catch(v){h=!0,u=v}finally{try{d||null==g.return||g.return()}finally{if(h)throw u}}}}catch(v){r=!0,a=v}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}},removeAll:function(){var e=this;this.$emit("clear");var t=!0,i=!1,n=void 0;try{for(var r,a=this.json[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.children.splice(0)}}catch(s){i=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}this.$nextTick((function(){e.$refs.tree.setCheckedKeys([])}))},insertLayer:function(e,t,i){var n=this;i=i||"未命名",this.json[e].children.push({id:t,text:i,icon:"el-icon-document"}),this.checked.push(t),this.$nextTick((function(){n.$refs.tree.setCheckedKeys(n.checked)}))},exportHandler:function(e){this.$emit("export",e)},importHandler:function(e){this.$emit("import",e)},closeLayerManaer:function(){this.$emit("close")}}}),o=a,s=(i("9bf2"),i("a293"),i("2877")),l=Object(s["a"])(o,n,r,!1,null,"139bdc3a",null);t["a"]=l.exports},8608:function(e,t,i){},9944:function(e,t,i){"use strict";i.d(t,"c",(function(){return c})),i.d(t,"a",(function(){return l}));var n=i("d225"),r=i("b0b4"),a=(i("34ef"),i("28a5"),i("1157")),o=i.n(a),s=window.Cesium,l=function(){function e(){}return e.cartesian2Pixel=function(e,t){return s.SceneTransforms.wgs84ToWindowCoordinates(t.scene,e)},e.pixel2Cartesian=function(t,i){return i.terrainProvider instanceof s.EllipsoidTerrainProvider?e.pixel2Cartesian1(t,i):e.pixel2Cartesian2(t,i)},e.pixel2Cartesian1=function(e,t){var i=t.camera.pickEllipsoid(e,t.scene.globe.ellipsoid);return i},e.pixel2Cartesian2=function(e,t){var i=t.camera.getPickRay(e),n=t.scene.globe.pick(i,t.scene);return n},e.cartesian2Radians=function(e,t){var i=t.scene.globe.ellipsoid||s.Ellipsoid.WGS84,n=s.Cartographic.fromCartesian(e,i),r=n.longitude,a=n.latitude,o=n.height;return{lon:r,lat:a,height:o}},e.cartesian2Degrees=function(t,i){var n=e.cartesian2Radians(t,i),r=s.Math.toDegrees(n.lon),a=s.Math.toDegrees(n.lat),o=n.height;return{lon:r,lat:a,height:o}},e.degrees2Cartesian=function(e){var t=s.Cartesian3.fromDegrees(e.lon,e.lat,e.height);return t},e.radians2Cartesian=function(e){return s.Cartesian3.fromRadians(e.lon,e.lat,e.height)},e.pixel2Degrees=function(t,i){var n=e.pixel2Cartesian(t,i);if(s.defined(n))return e.cartesian2Degrees(n,i)},e.pixel2Radians=function(t,i){var n=e.pixel2Cartesian(t,i);if(s.defined(n))return e.cartesian2Radians(n,i)},e.toDegrees=function(t,i){return t instanceof s.Cartesian3?e.cartesian2Degrees(t,i):t instanceof s.Cartesian2?e.pixel2Degrees(t,i):void 0},e.toRadians=function(t,i){return t instanceof s.Cartesian3?e.cartesian2Radians(t,i):t instanceof s.Cartesian2?e.pixel2Radians(t,i):void 0},e.toPixel=function(t,i){if(t instanceof s.Cartesian)return e.cartesian2Pixel(t,i)},e}();function c(e,t){if(!o()("#"+e))throw new Error("请指定要操作的元素");t||(t=e),o()("#"+t).mousedown((function(i){o()("#"+t).css("cursor","move");var n=o()("#"+e).position(),r=i.pageX-n.left,a=i.pageY-n.top;o()(document).bind("mousemove",(function(i){o()("#"+t).css("cursor","move"),o()("#"+e).stop();var n=i.pageX-r,s=i.pageY-a;o()("#"+e).animate({left:n+"px",top:s+"px"},10)}))})),o()(document).mouseup((function(){o()("#"+t).css("cursor","default"),o()(this).unbind("mousemove")}))}function d(e){var t={},i=e.scene,n=i.globe.ellipsoid,r=i.canvas,a=e.camera.pickEllipsoid(new s.Cartesian2(0,0),n),o=e.camera.pickEllipsoid(new s.Cartesian2(r.width,r.height),n);if(a&&o){var l=n.cartesianToCartographic(a),c=n.cartesianToCartographic(o);t.xmin=s.Math.toDegrees(l.longitude),t.ymax=s.Math.toDegrees(l.latitude),t.xmax=s.Math.toDegrees(c.longitude),t.ymin=s.Math.toDegrees(c.latitude)}else if(!a&&o){var d=null,h=0;do{h<=r.height?h+=10:r.height,d=e.camera.pickEllipsoid(new s.Cartesian2(0,h),n)}while(!d);var u=n.cartesianToCartographic(d),p=n.cartesianToCartographic(o);t.xmin=s.Math.toDegrees(u.longitude),t.ymax=s.Math.toDegrees(u.latitude),t.xmax=s.Math.toDegrees(p.longitude),t.ymin=s.Math.toDegrees(p.latitude)}return t.height=Math.ceil(e.camera.positionCartographic.height),t}var h=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s.Cartesian3,n=e.scene,r=e.camera,a=new s.Cartographic,o=new s.Ray;if(n.mode!==s.SceneMode.MORPHING&&(s.defined(e.trackedEntity)?i=e.trackedEntity.position.getValue(e.clock.currentTime,i):(o.origin=r.positionWC,o.direction=r.directionWC,i=n.globe.pick(o,n,i)),s.defined(i)))return n.mode===s.SceneMode.SCENE2D||n.mode===s.SceneMode.COLUMBUS_VIEW?(i=r.worldToCameraCoordinatesPoint(i,i),t&&(i=n.globe.ellipsoid.cartographicToCartesian(n.mapProjection.unproject(i,a),i))):t||(i=r.worldToCameraCoordinatesPoint(i,i)),i},u=function(e,t){e.render(),t&&""!=t||(t=(new Date).toLocaleString()+".png");var i=t.split(".")[1];p(t,e.scene.canvas.toDataURL("image/%s"%i))},p=function(e,t){var i=document.createElement("a"),n=a(t),r=document.createEvent("HTMLEvents");function a(e){for(var t=e.split(";base64,"),i=t[0].split(":")[1],n=window.atob(t[1]),r=n.length,a=new Uint8Array(r),o=0;o<r;++o)a[o]=n.charCodeAt(o);return new Blob([a],{type:i})}r.initEvent("click",!0,!0),i.download=e,i.href=URL.createObjectURL(n),i.click()},g=function(e,t){e.response?t(e.response.data):e.request?t(e.request):t(e.message)},m=function(){function e(t,i,r){Object(n["a"])(this,e);var a=document.createElement("div");a.id=i||"cursor-tip",a.className="cursor-tip-class",a.innerHTML=t,document.body.appendChild(a),this.ele=a,this._visible=!0;var o=this;r instanceof s.Viewer&&r.screenSpaceEventHandler.setInputAction((function(e){o.updatePosition(e.endPosition)}),s.ScreenSpaceEventType.MOUSE_MOVE)}return Object(r["a"])(e,[{key:"updatePosition",value:function(e){this.ele.style.left=e.x+10+"px",this.ele.style.top=e.y+10+"px"}},{key:"updateText",value:function(e){this.ele.innerHTML=e}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible=e,this.ele.style.display=e?"block":"none"}}]),e}();t["b"]={moveDiv:c,errroCatch:g,currentExtent:d,viewCenter:h,saveCurViewerImage:u,downloadFile:p,CVT:l,CursorTip:m}},"9a8d":function(e,t,i){"use strict";var n=i("1a0b"),r=i.n(n);r.a},"9bf2":function(e,t,i){"use strict";var n=i("bcab"),r=i.n(n);r.a},a01b:function(e,t,i){"use strict";var n=i("5330"),r=i.n(n);r.a},a04d:function(e,t,i){},a293:function(e,t,i){"use strict";var n=i("a04d"),r=i.n(n);r.a},aa38:function(e,t,i){"use strict";var n=i("32c8"),r=i.n(n);r.a},bcab:function(e,t,i){},cb32:function(e,t,i){"use strict";var n=i("312d"),r=i.n(n);r.a},cd53:function(e,t,i){"use strict";i.d(t,"d",(function(){return M})),i.d(t,"f",(function(){return k})),i.d(t,"e",(function(){return w})),i.d(t,"b",(function(){return b})),i.d(t,"a",(function(){return _})),i.d(t,"c",(function(){return C}));i("8e6e");var n=i("75fc"),r=(i("456d"),i("308d")),a=i("6bb5"),o=i("013f"),s=i("4e2b"),l=i("bd86"),c=(i("ac4d"),i("8a81"),i("ac6a"),i("d225")),d=i("b0b4"),h=i("4ab0"),u=i("9944");function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){Object(l["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var m=window.Cesium,v=m.defined,f=window.console,y=function(){function e(t){if(Object(c["a"])(this,e),t instanceof m.Viewer===!1)throw new Error("viewer不是一个有效的Cesium Viewer对象.");this.viewer=t,this._type=void 0,this._gvtype=void 0,this._gvid=void 0,this._name=void 0}return Object(d["a"])(e,[{key:"zoomTo",value:function(){this.graphic&&this.viewer.flyTo(this.graphic)}},{key:"coordinates",value:function(){if(this.position instanceof m.Cartesian3){var e=u["a"].cartesian2Degrees(this.position,this.viewer);return[e.lon,e.lat,e.height]}if(this.positions instanceof Array){var t=[],i=!0,n=!1,r=void 0;try{for(var a,o=this.positions[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value,l=u["a"].cartesian2Degrees(s,this.viewer);t.push([l.lon,l.lat,l.height])}}catch(c){n=!0,r=c}finally{try{i||null==o.return||o.return()}finally{if(n)throw r}}return"POLYLINE"===this.type?t:[t]}}},{key:"toGeoJson",value:function(){var e={MARKER:"Point",POLYLINE:"Polyline",POLYGON:"Polygon",LABEL:"Point"};return{type:"Feature",properties:{name:this.gvname,gvtype:this.gvtype},geometry:{type:e[this.type],coordinates:this.coordinates()}}}},{key:"type",get:function(){return this._type}},{key:"gvtype",get:function(){return this._gvtype},set:function(e){this._gvtype=e}},{key:"gvid",get:function(){return this._gvid},set:function(e){this._gvid=e,this.graphic&&(this.graphic.gvid=this._gvid)}},{key:"gvname",get:function(){return this._name},set:function(e){this._name=e,this.graphic&&(this.graphic.gvname=this.gvname,this.graphic.label&&(this.graphic.label.text=e))}},{key:"show",get:function(){return!!this.graphic&&this.graphic.show},set:function(e){this.graphic&&(this.graphic.show=e)}}]),e}(),_=function(e){function t(e,i){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultLabelStyle;Object(c["a"])(this,t),n=Object(r["a"])(this,Object(a["a"])(t).call(this,e)),n.viewer=e,n._type="MARKER",n.gvtype=h["a"].MARKER,n.position=i.position,i.image=i.image||t.defaultStyle.image,s.text=i.label,n.labelOptions=s;var l=Object(o["a"])(n);return n.options={gvname:n._name,gvtype:n.gvtype,gvid:n.gvid,position:new m.CallbackProperty((function(){return l.position}),!1),billboard:i,label:s},n.graphic=void 0,n.name="",n.description="",n.create(),n}return Object(s["a"])(t,e),Object(d["a"])(t,[{key:"setLabel",value:function(e){if(this.graphic)for(var t=Object.keys(e),i=0,n=t;i<n.length;i++){var r=n[i];this.graphic.label[r]=e[r]}}},{key:"create",value:function(){this.graphic=this.viewer.entities.add(this.options)}},{key:"remove",value:function(){this.viewer&&this.viewer.entities.remove(this.graphic),this.graphic=void 0}},{key:"updateText",value:function(e,t){this.graphic&&(this.graphic.label.text=e,this.name=e,this.description=t,this.gvname=e)}},{key:"updateImage",value:function(e){this.graphic&&(void 0===e?(this.graphic.label.pixelOffset=void 0,this.graphic.billboard.image=void 0):(this.graphic.label.pixelOffset=this.labelOptions.pixelOffset,this.graphic.billboard.image=e))}},{key:"updatePosition",value:function(e){this.position=e}},{key:"stopEdit",value:function(){}},{key:"startEdit",value:function(){}},{key:"destroy",value:function(){this.remove(),this.viewer=void 0,this.options=void 0,this.position=void 0}},{key:"text",get:function(){return this.graphic.label.text},set:function(e){this.graphic.label.text=e,this.gvname=e}},{key:"font",get:function(){return this.graphic.label.font.getValue()},set:function(e){this.graphic.label.font=e}},{key:"color",get:function(){return this.graphic.label.fillColor},set:function(e){this.graphic.label.fillColor=e}}],[{key:"fromDegrees",value:function(e,i){var n=t.defaultStyle;return n.position=m.Cartesian3.fromDegrees(i.lon,i.lat,i.height),new t(e,n)}},{key:"fromRadians",value:function(e,i){var n=t.defaultStyle;return n.position=m.Cartesian3.fromRadians(i.lon,i.lat,i.height),new t(e,n)}}]),t}(y);Object(l["a"])(_,"defaultStyle",{image:"data:img/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACk0lEQVRYR+2WO2gUURSGv7MBsZKo\n        jY/CJkiiIviAKDuzLGqjWGiRRdEiVqKxEUUEA0ZQBFFsVLRSwaBJCi1EGw3LzsQH+ABRIphKUCs1\n        pRa7R3acjbuzs3NnZtE0TnnvOf/57j2PO8IsfzLL8WkLQPN0VQ8gRabSHiQRgNosBg4jrELpBRb4\n        gb8hPEd5C1wUhy9xgWIDqMV2hGvAEoP4Z5T94nI/DkQsALU4iTAUR3DGRhkSl1MmHyOA5liD8sok\n        FLovrJUSr6N8IwE0TydlXGBliMgw8Mhf3wLsCbF5RweWFJluBRENYHEe4UiTs1IQl7H6dbXoQxgN\n        sb0gLkfTAdg8BjY1OCvrxeVlmKBarEN4EdgbF4fNaQG+A50zzsKYlChE5VRzjKL01dlMi8P8xACa\n        p5syk4HTD4jLlUgAi4MIlxtsOuiRIu/D/FrWgOZZRLlpoOwThxuRADb9wPUGmwrLZIKPiQCqxmrz\n        BNhY5zgsDnsNALcCHfFBHJYnToEHkOM4ytlAGpo6oLbfohOuisOBdABZNpDhaUhrNXVCiw4AoV9K\n        3EwF4N2CxSRCd5OAMEaForeeIR+o/D/mwgopBYq5Tsw8ii1OIJyOynvE3og47IryNQP0Mo85PAN6\n        EkL8RMm2Glo1LSOA3w3VIors/5AUnZESgyboWAA+RPVRypoE/X3jI5ToBvyWLKCMxAQwDqzEAP4t\n        3AV2GCDuicPOmKDJfkrVZjUwDixsEeBr9fUUhzd/BcCfCwMIl0IDKIfEDTxEBpLYRVivoza3oam/\n        74jD7rgnT1UDNSfNM5cKUyhLvTXhExm6pMiPfwLgpSLLVjI88AJW2CYTPEwa/Dd7G5/anPNEHI6l\n        lWkLIG3Qer//AL8AUSKwIU5nmlMAAAAASUVORK5CYII=",verticalOrigin:m.VerticalOrigin.BASELINE}),Object(l["a"])(_,"defaultLabelStyle",{font:"28px sans-serif",fillColor:m.Color.WHITE,showBackground:!0,style:m.LabelStyle.FILL_AND_OUTLINE,verticalOrigin:m.VerticalOrigin.BOTTOM,pixelOffset:new m.Cartesian2(20,-20),heightReference:m.HeightReference.NONE});var M=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultStyle;Object(c["a"])(this,t),i=Object(r["a"])(this,Object(a["a"])(t).call(this,e)),i._type="POINT",i.gvtype=h["a"].POINT,i.positions=n.positions;var s=Object(o["a"])(i);if(i.positions instanceof m.Cartesian3)i.options={gvname:i._name,gvid:i._gvid,gvtype:i._gvtype,position:new m.CallbackProperty((function(){return s.positions}),!1),point:n};else{if(!(i.positions instanceof Array))throw new Error("options参数错误.");i.options=[];for(var l=function(e){var t={gvname:i._name,gvid:i._gvid,gvtype:i._gvtype,position:new m.CallbackProperty((function(){return s.positions[e]}),!1),point:n};i.options.push(t)},d=0;d<i.positions.length;d++)l(d)}return i.graphic=[],i.create(),i}return Object(s["a"])(t,e),Object(d["a"])(t,[{key:"create",value:function(){var e=this;this.options instanceof Array?this.graphic=this.options.map((function(t){var i=e.viewer.entities.add(t);return i})):this.graphic=this.viewer.entities.add(this.options)}},{key:"remove",value:function(){var e=this;this.graphic instanceof Array?this.graphic.map((function(t){e.viewer.entities.remove(t)})):this.viewer.entities.remove(this.graphic),this.graphic=void 0}},{key:"stopEdit",value:function(){this.graphic instanceof m.Entity?this.graphic.position=this.graphic.position.getValue():this.graphic instanceof Array&&(this.graphic=this.graphic.map((function(e){return e.position=e.position.getValue()})))}},{key:"contain",value:function(e){if(this.graphic instanceof m.Cartesian3)return this.graphic===e;if(this.graphic instanceof Array)for(var t=this.graphic.length,i=0;i<t;i++)if(this.graphic[i]===e)return i;return-1}},{key:"destroy",value:function(){this.remove(),this.viewer=void 0,this.options=void 0,this.graphic=void 0}}],[{key:"equalPosition",value:function(e,t){if(!(e instanceof m.Cartesian3&&t instanceof m.Cartesian3))throw new Error("node不是一个有效的Cartesian3对象");return e.x===t.x&&e.y===t.y&&e.z===t.z}},{key:"setStyle",value:function(e,t){for(var i=Object.keys(t),n=0,r=i;n<r.length;n++){var a=r[n];e.point[a]=t[a]}}},{key:"fromDegrees",value:function(e,i){var n=t.defaultStyle;if(i instanceof Array)n.positions=i.map((function(e){if(void 0===e.lon||void 0===e.lat)throw new Error("参数错误");return m.Cartesian3.fromDegrees(e.lon,e.lat,e.height)}));else{if(void 0===i.lon||void 0===i.lat)throw new Error("参数错误");n.positions=m.Cartesian3.fromDegrees(i.lon,i.lat,i.height)}return new t(e,n)}},{key:"fromRadians",value:function(e,i){var n=t.defaultStyle;if(i instanceof Array)n.positions=i.map((function(e){if(void 0===e.lon||void 0===e.lat)throw new Error("参数错误");return m.Cartesian3.fromRadians(e.lon,e.lat,e.height)}));else{if(void 0===i.lon||void 0===i.lat)throw new Error("参数错误");n.positions=m.Cartesian3.fromRadians(n.positions.lon,n.positions.lat,n.positions.height)}return new t(e,n)}},{key:"isCesiumPoint",value:function(e){return!(!v(e)||!e.id||e.id.gvtype!==h["a"].POINT)}}]),t}(y);Object(l["a"])(M,"defaultStyle",{color:m.Color.RED,pixelSize:5,outlineColor:m.Color.WHITE,outlineWidth:3,heightReference:m.HeightReference.CLAMP_TO_GROUND}),Object(l["a"])(M,"editStyle",{color:m.Color.RED,pixelSize:5,outlineColor:m.Color.AQUA,outlineWidth:3,heightReference:m.HeightReference.CLAMP_TO_GROUND}),Object(l["a"])(M,"selectedStyle",{color:m.Color.AQUA,pixelSize:5,outlineColor:m.Color.AQUA,outlineWidth:3});var k=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultStyle;Object(c["a"])(this,t),i=Object(r["a"])(this,Object(a["a"])(t).call(this,e)),i._type="POLYLINE",i.gvtype=h["a"].POLYLINE,i.positions=n.positions||[];var s=Object(o["a"])(i),l=function(){return s.positions};return i.options={gvname:i._name,gvid:i._gvid,gvtype:i._gvtype,polyline:n},i.options.polyline.positions=new m.CallbackProperty(l,!1),i.graphic=void 0,i.nodeGraphic=void 0,i.node=!1,i.create(),i}return Object(s["a"])(t,e),Object(d["a"])(t,[{key:"addNode",value:function(e){e instanceof m.Cartesian3&&this.positions.push(e)}},{key:"popNode",value:function(){this.positions.pop()}},{key:"updateNode",value:function(e,t){if(e<0||e>this.positions.length-1)throw new Error("无效的index");if(t instanceof m.Cartesian3===!1)throw new Error("无效的node");this.positions[e]=t}},{key:"dropNode",value:function(e){this.positions.splice(e,1)}},{key:"create",value:function(){this.viewer&&(this.graphic=this.viewer.entities.add(this.options))}},{key:"createNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M.defaultStyle;e.positions=this.positions,e.clampToGround=this.options.polyline.clampToGround,this.nodeGraphic=new M(this.viewer,e),this.node=!0}},{key:"startEdit",value:function(){v(this.graphic)&&this.createNode()}},{key:"stopEdit",value:function(){this.graphic,m.Entity,this.removeNode()}},{key:"remove",value:function(){this.viewer&&(this.viewer.entities.remove(this.graphic),this.graphic=void 0,this.removeNode())}},{key:"removeNode",value:function(){this.node&&(this.nodeGraphic.remove(),this.node=!1)}},{key:"setMaterial",value:function(e){this.graphic.polyline.material=e}},{key:"destroy",value:function(){this.remove(),this.viewer=void 0,this.options=void 0,this.positions=void 0,this.nodeGraphic&&this.nodeGraphic.destroy(),this.nodeGraphic=void 0}},{key:"material",get:function(){if(this.graphic)return this.graphic.polyline.material}},{key:"width",get:function(){if(this.graphic)return this.graphic.polyline.width.getValue()}}],[{key:"fromDegrees",value:function(e,i){i=i.map((function(e){return m.Cartesian3.fromDegrees(e.lon,e.lat,e.height)}));var n=g({positions:i},t.defaultStyle),r=new t(e,n);return r}},{key:"fromRadians",value:function(e,i){i=i.map((function(e){return m.Cartesian3.fromRadians(e.lon,e.lat,e.height)}));var n=g({positions:i},t.defaultStyle),r=new t(e,n);return r}}]),t}(y);Object(l["a"])(k,"defaultStyle",{clampToGround:!0,material:m.Color.fromCssColorString("rgba(247,224,32,1)"),width:3}),Object(l["a"])(k,"selectedStyle",{clampToGround:!0,material:m.Color.AQUA,width:3});var w=function(e){function t(e){var i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultStyle;Object(c["a"])(this,t),i=Object(r["a"])(this,Object(a["a"])(t).call(this,e)),i._type="POLYGON",i.gvtype=h["a"].POLYGON,i.positions=s.positions||[],i.nodePositions=Object(n["a"])(i.positions);var l=Object(o["a"])(i);return i.options={gvid:i.gvid,gvtype:i.gvtype,polygon:g({hierarchy:new m.CallbackProperty((function(){return new m.PolygonHierarchy(l.positions)}),!1)},s)},i.node=!1,i.graphic=void 0,i.nodeGraphic=void 0,i.outlineGraphic=void 0,i.outline=s.outline,i.create(),i}return Object(s["a"])(t,e),Object(d["a"])(t,[{key:"addNode",value:function(e){if(e instanceof m.Cartesian3){this.positions.push(e);var t=this.nodePositions.length;0===t&&(this.nodePositions.push(this.positions[0]),this.nodePositions.push(this.positions[0])),t>=2&&(this.nodePositions[t]=this.nodePositions[t-1],this.nodePositions[t-1]=e)}}},{key:"updateNode",value:function(e,t){if(e<0||e>this.positions.length-1)throw new Error("无效的index");if(t instanceof m.Cartesian3===!1)throw new Error("无效的node");this.positions[e]=t,0===e?(this.nodePositions[0]=t,this.nodePositions[this.nodePositions.length-1]=t):this.nodePositions[e]=t}},{key:"popNode",value:function(){this.positions.pop(),this.nodePositions.splice(this.nodePositions.length-2),this.nodePositions.push(this.positions[0])}},{key:"dropNode",value:function(e){this.positions.splice(e,1),this.nodePositions.splice(e,1),0===e&&(this.nodePositions[this.nodePositions.length-1]=this.nodePositions[0])}},{key:"create",value:function(){this.options.polygon.outline=!1,this.viewer&&(this.graphic=this.viewer.entities.add(this.options),this.outline&&this.createOutline())}},{key:"createNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M.defaultStyle;this.node=!0,e.positions=this.positions,e.clampToGround=this.graphic.polygon.perPositionHeight.getValue(),this.nodeGraphic=new M(this.viewer,e)}},{key:"createOutline",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!1!==this.options.outline?(e.width=this.options.polygon.outlineWidth||k.defaultStyle.width,e.material=this.options.polygon.outlineColor||k.defaultStyle.material,e.clampToGround=!this.graphic.polygon.perPositionHeight.getValue(),e.positions=this.nodePositions,this.outlineGraphic=new k(this.viewer,e),this.outline=!0):f.log("如果您想创建多边形边线,请在options中设置outline为true")}},{key:"startEdit",value:function(){this.graphic instanceof m.Entity&&(this.outline?(this.outlineGraphic.startEdit(),this.nodeGraphic=this.outlineGraphic.nodeGraphic,this.node=!0):this.createNode())}},{key:"stopEdit",value:function(){this.graphic,m.Entity,this.removeNode(),this.nodeGraphic&&this.nodeGraphic.stopEdit(),this.outlineGraphic&&this.outlineGraphic.stopEdit()}},{key:"remove",value:function(){this.viewer&&(this.viewer.entities.remove(this.graphic),this.graphic=void 0,this.removeNode(),this.removeOutline())}},{key:"removeOutline",value:function(){this.outline&&(this.outlineGraphic.remove(),this.outline=!1,this.outlineGraphic=void 0)}},{key:"removeNode",value:function(){this.node&&(this.nodeGraphic.remove(),this.node=!1)}},{key:"destroy",value:function(){this.remove(),this.viewer=void 0,this.positions=void 0,this.options=void 0,this.nodeGraphic&&this.nodeGraphic.destroy(),this.outlineGraphic&&this.outlineGraphic.destroy(),this.outlineGraphic=void 0,this.nodeGraphic=void 0}},{key:"outlineStyle",get:function(){if(this.outlineGraphic)return this.outlineGraphic.polyline},set:function(e){var t={};if(v(this.outlineGraphic)){var i=this.outlineGraphic.graphic.polyline;t.material=e.outlineColor||i.material,t.width=e.outlineWidth||i.width,this.outlineGraphic.graphic.polyline.material=t.material,this.outlineGraphic.graphic.polyline.width=t.width,this.outlineGraphic.options.polyline.material=t.material,this.outlineGraphic.options.polyline.width=t.width}else this.outline&&this.createOutline(t)}},{key:"material",get:function(){if(this.graphic)return this.graphic.polygon.material.getValue().color}},{key:"outlineColor",get:function(){return this.outlineGraphic?this.outlineGraphic.graphic.polyline.material.getValue().color:t.defaultStyle.outlineColor}},{key:"outlineWidth",get:function(){return this.outlineGraphic?this.outlineGraphic.graphic.polyline.width.getValue():t.defaultStyle.outlineWidth}}],[{key:"fromDegrees",value:function(e,i){i=i.map((function(e){return m.Cartesian3.fromDegrees(e.lon,e.lat,e.height)}));var n=t.defaultStyle;return n.positions=i,new t(e,n)}},{key:"fromRadians",value:function(e,i){i=i.map((function(e){return m.Cartesian3.fromRadians(e.lon,e.lat,e.height)}));var n=t.defaultStyle;return n.positions=i,new t(e,n)}}]),t}(y);Object(l["a"])(w,"defaultStyle",{material:new m.Color.fromCssColorString("rgba(247,224,32,0.5)"),outline:!0,outlineColor:new m.Color.fromCssColorString("rgba(255,247,145,1)"),outlineWidth:2,perPositionHeight:!1}),Object(l["a"])(w,"selectedStyle",{material:new m.ColorMaterialProperty(m.Color.AQUA.withAlpha(.4)),outlineColor:m.Color.AQUA.withAlpha(.4)});var b=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultStyle;return Object(c["a"])(this,t),i=Object(r["a"])(this,Object(a["a"])(t).call(this,e)),i._type="LABEL",i._gvtype=h["a"].LABEL,i.position=n.position,i.options={gvid:i._gvid,gvtype:i._gvtype,position:i.position,label:n},i.graphic=void 0,i.create(),i}return Object(s["a"])(t,e),Object(d["a"])(t,[{key:"create",value:function(){this.graphic=this.viewer.entities.add(this.options)}},{key:"remove",value:function(){this.viewer&&this.viewer.entities.remove(this.graphic),this.graphic=void 0}},{key:"updateText",value:function(e){this.graphic&&(this.graphic.label.text=e,this.gvname=e)}},{key:"destroy",value:function(){this.remove(),this.viewer=void 0,this.options=void 0,this.positions=void 0}},{key:"color",get:function(){if(this.graphic)return this.graphic.label.fillColor.getValue()},set:function(e){this.graphic&&(this.graphic.label.fillColor=e)}},{key:"font",get:function(){if(this.graphic)return this.graphic.label.font.getValue()}}]),t}(y);Object(l["a"])(b,"defaultStyle",{color:m.Color.WHITE,font:"28px sans-serif",showBackground:!0});var C=function(e){function t(e,i){var n;return Object(c["a"])(this,t),n=Object(r["a"])(this,Object(a["a"])(t).call(this,e)),n._type="MODEL",n._gvtype=h["a"].MODEL,n.position=i.position,n.options={gvid:n._gvid,gvtype:n._gvtype,position:n.position,model:i},n.create(),n}return Object(s["a"])(t,e),Object(d["a"])(t,[{key:"create",value:function(){this.graphic=this.viewer.entities.add(this.options)}},{key:"remove",value:function(){this.viewer&&(this.viewer.entities.remove(this.graphic),this.graphic=void 0)}},{key:"destroy",value:function(){this.remove(),this.options=void 0,this.position=void 0}},{key:"uri",set:function(e){this.graphic&&(this.graphic.model.uri=e)}},{key:"color",set:function(e){this.graphic&&(this.graphic.model.color=e)}},{key:"mode",set:function(e){this.graphic&&(this.graphic.model.colorBlendMode=e)}},{key:"mixed",set:function(e){this.graphic&&(this.graphic.model.colorBlendAmount=e)}}]),t}(y);Object(l["a"])(C,"defaultStyle",{colorBlendMode:m.ColorBlendMode.HIGHLIGHT,color:m.Color.WHITE,colorBlendAmount:.5,minimumPixelSize:64})},e167:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6762"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("2fdb"),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ac4d"),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("8a81"),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6__),_core_CesiumDrawing__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("3015"),_components_markerViewer__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2c79"),_core_Graphic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("cd53"),_layerManager__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("5eae"),_core_GraphicType__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("4ab0"),shapefile__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("c26a"),_js_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("9944"),jquery__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_14__),graphicManager=void 0,Cesium=window.Cesium,console=window.console;__webpack_exports__["a"]={name:"cesiumDrawViewer",data:function(){return{visible:!0,editMode:!1,graphicType:void 0,menuSelected:{},layerManagerVisible:!1,markerColor:"rgba(255, 255,255, 1)",fontSize:"28px",markerFont:"sans-serif",markerOptionsVisible:!1,markerOption:"",lineColor:"rgba(247,224,32,1)",lineWidth:"3px",lineWidthList:["1px","2px","3px","4px","5px","6px","8px","10px","12px"],lineStyleList:[{value:"solid",name:"实线"},{value:"dash",name:"虚线"},{value:"glow",name:"发光线"},{value:"arrow",name:"箭头线"}],lineStyle:"solid",graphicHeight:"GROUND_ADN_MODEL",heightList:[{value:"GROUND_ADN_MODEL",name:"依附地形和模型"},{value:"GROUND",name:"依附地形"},{value:"MODEL",name:"依附模型"},{value:"NONE",name:"空间线"}],outlineWidth:"3px",outlineColor:"rgba(247,224,32,1)",polygonColor:"rgba(247,224,32,0.5)",outline:!0,imags:["./static/images/markers/1.png","./static/images/markers/2.png","./static/images/markers/3.png","./static/images/markers/4.png","./static/images/markers/5.png","./static/images/markers/6.png","./static/images/markers/7.png","./static/images/markers/8.png"],fontSizeList:["10px","12px","14px","16px","18px","20px","24px","32px","64px"],fontList:["sans-serif","宋体"],fontFamily:"sans-serif",modelMode:"Highlight",modelModeList:[{value:"Highlight",name:"高亮"},{value:"Replace",name:"替换"},{value:"Mix",name:"混合"}],modelColor:"#FFFFFF",modelMixed:.5,modelSelectPanelvisible:!1,selectedModel:void 0}},computed:{defaultImage:function(){return'this.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB1UlEQVQ4T6XTMWgUQRQG4P/N3gaRSBpBEAMqrldkYyXu5VCMChZBEDxOsDIgKKSyECxTWERIYe2hRdoLeKV2RhCymwhy3E48b087C7EQtRDj7vyyg3dKDGyI087MN/97MyP4zyFF+5vNpnPEP3neZGlNlFwBoU/53rnBvn+AsPP+AFRWgUFNKVwgcVCAp4C0lJu10lTNiTGdYLLcyhF52e3uG8lUDVRnDXhagEP5YkM2pia9la0Jw413nhhzKfC9BxaI4t4aII3A9x6FcXJbBGNFZQ3jG3Yk0snjYMK7EelkHsBGMOEt7xSI4oQSxr3lin+8ngPG4MV2sQdgGPdvCviQkFsV/1jDAmu6f6c0wqWfm5grAiKd1EE0IbiaJ7VApN+egcF+KHWiCNhamgVekW4a9xdE4dsAeK716F7jLkJUNXOzmWq5/GG7vlggn4ji5BkEqzngQDYpXARQtdcErKRje2aq4+PfbaOJKcC5G/hH20NgPU7uU/AjJT47wD0Ao3+fSMgTBXwlOPvnBcoSweu/E/SuUdRFQ7YdwD6QopEnIzBtgfV2t8ySM5sSH3cF2D7oZD4jvpSAy0Wn5/MEPgGoDz/T6us3hx231KVgYSeAbTAx/Qs/Rdq4fXky6QAAAABJRU5ErkJggg=="'}},props:{extendMarkerImage:{type:Array,default:function(){return[]}},extendMarkerModel:{type:Array,default:function(){return[]}},viewer:{}},components:{MarkerViewer:_components_markerViewer__WEBPACK_IMPORTED_MODULE_8__["a"],layerManager:_layerManager__WEBPACK_IMPORTED_MODULE_10__["a"]},mounted:function(){var e=this;Object(_js_utils__WEBPACK_IMPORTED_MODULE_13__["c"])("drawtoolPanel","drawtoolHead"),this.$nextTick((function(){jquery__WEBPACK_IMPORTED_MODULE_14___default()("#drawtoolPanel .el-color-picker__icon").addClass("iconfont iconcolor")})),document.addEventListener("addEvent",(function(t){e.pushLayerManaer(t.detail.gvtype,t.detail.gvid,t.detail.gvname)})),document.addEventListener("stopEdit",(function(){e.menuSelected={},e.editMode=!1,e.cesiumViewer.scene.globe.depthTestAgainstTerrain=e._depthTestAgainstTerrain})),document.addEventListener("startEdit",(function(t){e.menuSelected={},e.menuSelected[t.detail.graphicType]=!0,e.setControlByEvent(t),e.editMode=!0,/.*MODEL.*/.test(e.graphicHeight)&&(e.cesiumViewer.scene.globe.depthTestAgainstTerrain=!0)})),document.addEventListener("destroyEvent",(function(t){e.$refs.layerManager.drop(t.detail.gvid),e.cesiumViewer.scene.globe.depthTestAgainstTerrain=e._depthTestAgainstTerrain})),this.viewer instanceof Cesium.Viewer?this.init(this.viewer):window.viewer instanceof Cesium.Viewer&&this.init(window.viewer),this.$nextTick((function(){e.syncColor("markerColor",e.markerColor),e.syncColor("lineColor",e.lineColor),e.syncColor("polygonColor",e.polygonColor)}))},methods:{init:function(e){if(e instanceof Cesium.Viewer==0)throw new Error("viewer 不是一个有效的Cesium Viewer对象");this._depthTestAgainstTerrain=e.scene.globe.depthTestAgainstTerrain,this.$refs.markerManager.init(e),graphicManager=new _core_CesiumDrawing__WEBPACK_IMPORTED_MODULE_7__["a"](e),this.selectedModel=this.extendMarkerModel.length?this.extendMarkerModel[0].url:void 0,this.cesiumViewer=e},syncColor:function(e,t){var i=[e];"labelColor"===e?i.push("markerColor"):"markerColor"===e&&i.push("labelColor");var n=jquery__WEBPACK_IMPORTED_MODULE_14___default()(".el-color-picker__icon,.el-icon-arrow-down,.iconfont icon-seban"),r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value,d=jquery__WEBPACK_IMPORTED_MODULE_14___default()(c).parent().parent();d.length>0&&i.includes(d[0].id)&&jquery__WEBPACK_IMPORTED_MODULE_14___default()(c).css("color",t)}}catch(h){a=!0,o=h}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}},pushLayerManaer:function(e,t,i){this.$refs.layerManager.insertLayer(e,t,i)},dropLayerManager:function(e){console.log(e)},modelThumb:function(e){return e.thumb?e.thumb:this.defaultImage},selectModel:function(e){this.selectedModel=e.url,this.modelSelectPanelvisible=!1,this.$refs.markerManager.setModel({uri:e.url})},setControlByEvent:function(e){if("POLYGON"===e.detail.graphicType){var t=e.detail.material,i=e.detail.outlineColor;t&&(this.polygonColor="rgba(".concat(255*t.red,",").concat(255*t.green,",").concat(255*t.blue,",").concat(t.alpha,")")),this.outline=e.detail.outline,i&&(this.outlineColor="rgba(".concat(255*i.red,",").concat(255*i.green,",").concat(255*i.blue,",").concat(i.alpha,")")),this.outlineWidth=e.detail.outlineWidth,this.graphicHeight=e.detail.heightReference}else if("POLYLINE"===e.detail.graphicType){this.graphicHeight=e.detail.heightReference,this.lineWidth=e.detail.width;var n=e.detail.material;n instanceof Cesium.PolylineDashMaterialProperty?this.lineStyle="dash":n instanceof Cesium.PolylineGlowMaterialProperty?this.lineStyle="glow":n instanceof Cesium.PolylineArrowMaterialProperty?this.lineStyle="arrow":this.lineStyle="solid",this.lineColor="rgba(".concat(255*n.getValue().color.red,",").concat(255*n.getValue().color.green,",").concat(255*n.getValue().color.blue,",").concat(n.getValue().color.alpha,")")}},stopOthers:function(){this.$refs.markerManager.stopPick(),graphicManager.destroyManager(),graphicManager.editManager=void 0},setLabel:function setLabel(){var option;try{option=eval("("+this.markerOption+")"),this.$refs.markerManager.setLabel(option)}catch(err){console.log(err)}this.markerOptionsVisible=!1},updateMarker:function(e,t){e&&(t=t||"未命名",this.$refs.layerManager.rename(null,e,t)),this.editMode=!1,this.menuSelected={}},addMarker:function(e,t,i){this.pushLayerManaer(i,e,t),i===_core_GraphicType__WEBPACK_IMPORTED_MODULE_11__["a"].MODEL&&(this.editMode=!1,this.menuSelected={})},closeLayerManager:function(){this.layerManagerVisible=!1},exportGraphic:function(e){"MARKER"===e||"LABEL"===e?this.$refs.markerManager.export(e):graphicManager.export(e)},importGraphic:function(){document.getElementById("graphicuploadhandler").click()},importfp:function(){var e=this,t=event||window.event,i=t.target.files,n=i[0].name.split(".")[1];if(0!=i.length){var r=new FileReader;"geojson"===n.toLowerCase()?(r.readAsText(i[0]),r.onload=function(){if(this.result){try{var t=JSON.parse(this.result).features,i=!0,n=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value;"POINT"===s.geometry.type.toUpperCase()?e.$refs.markerManager.import(s):graphicManager.import(s)}}catch(l){n=!0,r=l}finally{try{i||null==o.return||o.return()}finally{if(n)throw r}}}catch(c){console.log(c)}document.getElementById("graphicuploadhandler").value=""}}):"shp"===n.toLowerCase()&&(r.readAsArrayBuffer(i[0]),r.onload=function(){Object(shapefile__WEBPACK_IMPORTED_MODULE_12__["a"])(this.result).then((function(t){return t.read().then((function i(n){if(n.done)return!1;var r=n.value;return"Point"===r.geometry.type?e.$refs.markerManager.import(r):graphicManager.import(r),t.read().then(i)}))})).catch((function(e){return console.error(e.stack)}))},document.getElementById("graphicuploadhandler").value="")}},editMarker:function(e){this.editMode=!0,graphicManager.editManager&&(graphicManager.editManager.stopEdit(),graphicManager.editManager=void 0),this.menuSelected={},this.menuSelected[e]=!0},clearGraphic:function(){this.$refs.markerManager.removeAll(),graphicManager.removeAll()},deleteMarker:function(e){this.menuSelected["MARKER"]=!1,this.editMode=!1,this.$refs.layerManager.drop(e)},locateGraphic:function(e){if(graphicManager.graphicManager.has(e)){var t=graphicManager.graphicManager.get(e);t.zoomTo()}else this.$refs.markerManager.zoomTo(e)},editGraphic:function(e){graphicManager.graphicManager.has(e)?graphicManager.edit(e):this.$refs.markerManager.edit(e)},selectGraphic:function(e,t){"marker"===e?this.$refs.markerManager.select(_core_GraphicType__WEBPACK_IMPORTED_MODULE_11__["a"].MARKER,void 0,t):"label"===e?this.$refs.markerManager.select(_core_GraphicType__WEBPACK_IMPORTED_MODULE_11__["a"].LABEL,void 0,t):"model"===e?this.$refs.markerManager.select(_core_GraphicType__WEBPACK_IMPORTED_MODULE_11__["a"].MODEL,void 0,t):"polyline"===e?graphicManager.select(_core_GraphicType__WEBPACK_IMPORTED_MODULE_11__["a"].POLYLINE,void 0,t):"label"===e?graphicManager.select(_core_GraphicType__WEBPACK_IMPORTED_MODULE_11__["a"].POLYGON,void 0,t):graphicManager.graphicManager.has(e)?graphicManager.select(void 0,e,t):this.$refs.markerManager.select(void 0,e,t)},deleteGraphic:function(e){if(graphicManager.graphicManager.has(e)){var t=graphicManager.graphicManager.get(e);t.destroy(),graphicManager.graphicManager.delete(e)}else this.$refs.markerManager.drop(e)},renameGraphic:function(e,t){var i=/(.*?)</g.exec(t);t=/(.*?)</g.test(t)?i[1]:t,"未命名"===t&&(t=""),graphicManager.has(e)?graphicManager.rename(e,t):this.$refs.markerManager.rename(e,t)},menuAction:function(e){var t=["MARKER","POLYLINE","POLYGON","LABEL","MODEL"],i=this.menuSelected[e];switch(this.menuSelected={},graphicManager.tip.visible=!1,this.menuSelected[e]=!i,t.includes(e)?(this.graphicType===e?this.editMode=!this.editMode:this.editMode=!0,this.graphicType=e):this.editMode=!1,this.stopOthers(e),/.*MODEL*/.test(this.graphicHeight)&&(["MARKER","LABEL","MODEL","LAYER"].includes(e)||(this.cesiumViewer.scene.globe.depthTestAgainstTerrain=!0)),e){case"MARKER":this.editMode?this.$refs.markerManager.pick("marker"):this.$refs.markerManager.cancelMark();break;case"POLYLINE":this.heightList[3].name="空间线",this.editMode?(graphicManager.heightReference=this.graphicHeight,graphicManager.material=Cesium.Color.fromCssColorString(this.lineColor),graphicManager.createPolyline()):graphicManager.destroyManager();break;case"POLYGON":if(this.heightList[3].name="空间面",this.editMode){graphicManager.heightReference=this.graphicHeight;var n=_core_Graphic__WEBPACK_IMPORTED_MODULE_9__["e"].defaultStyle;n.outline=this.outline,n.outlineColor=Cesium.Color.fromCssColorString(this.outlineColor),n.outlineWidth=parseInt(this.outlineWidth),graphicManager.material=Cesium.Color.fromCssColorString(this.polygonColor),graphicManager.style=n,graphicManager.createPolygon()}else graphicManager.destroyManager();break;case"LABEL":this.editMode?this.$refs.markerManager.pick("label"):this.$refs.markerManager.cancelMark();break;case"MODEL":if(this.editMode){if(this.extendMarkerModel.length<1)throw this.editMode=!1,new Error("没有可用的模型");this.$refs.markerManager.setModel({uri:this.selectedModel}),this.$refs.markerManager.pick("model")}else this.$refs.markerManager.cancelMark()}},setLineMaterial:function(e,t){switch(e){case"solid":graphicManager.material=t;break;case"dash":graphicManager.material=new Cesium.PolylineDashMaterialProperty({color:t});break;case"glow":graphicManager.material=new Cesium.PolylineGlowMaterialProperty({color:t});break;case"arrow":graphicManager.material=new Cesium.PolylineArrowMaterialProperty(t);break}}},watch:{fontSize:function(e){e=parseInt(e),isNaN(e)&&(e="18"),e+="px";var t=this.menuSelected["MARKER"]?this.markerFont:this.fontFamily;this.$refs.markerManager.setFont(e+" "+t)},markerColor:function(e){e&&(this.$refs.markerManager.setColor(Cesium.Color.fromCssColorString(e)),this.syncColor("markerColor",e))},graphicHeight:function(e){void 0!==e&&(graphicManager.heightReference=e)},lineColor:function(e){if(e){var t=Cesium.Color.fromCssColorString(e),i=graphicManager.editManager.material,n="solid";i instanceof Cesium.PolylineDashMaterialProperty?n="dash":i instanceof Cesium.PolylineGlowMaterialProperty?n="glow":i instanceof Cesium.PolylineArrowMaterialProperty&&(n="arrow"),this.setLineMaterial(n,t),this.syncColor("lineColor",e)}},lineStyle:function(e){if(this.lineColor){var t=Cesium.Color.fromCssColorString(this.lineColor);this.setLineMaterial(e,t)}},lineWidth:function(e){var t=parseInt(e);isNaN(t)&&(t=3),graphicManager.style={width:t}},outline:function(e){if(e){graphicManager.editManager.createOutline();var t=Cesium.Color.fromCssColorString(this.outlineColor),i=parseInt(this.outlineWidth)||3;graphicManager.editManager.outline=e,graphicManager.style={outline:!0,outlineWidth:i,outlineColor:t}}else graphicManager.editManager.removeOutline()},polygonColor:function(e){if(e){var t=Cesium.Color.fromCssColorString(e);graphicManager.material=t,this.syncColor("polygonColor",e)}},outlineColor:function(e){if(e){var t=Cesium.Color.fromCssColorString(e);graphicManager.style={outlineColor:t},this.syncColor("outlineColor",e)}},outlineWidth:function(e){var t=parseInt(e)||3;graphicManager.style={outlineWidth:t}},fontFamily:function(e){var t=parseInt(this.fontSize);isNaN(t)&&(t="18"),t+="px",this.$refs.markerManager.setFont(t+" "+e)},modelColor:function(e){if(e){var t=Cesium.Color.fromCssColorString(e);this.$refs.markerManager.setModel({color:t}),this.syncColor("modelColor",e)}},modelMode:function(e){var t=Cesium.ColorBlendMode[e.toUpperCase()];this.$refs.markerManager.setModel({mode:t})},modelMixed:function(e){this.$refs.markerManager.setModel({mixed:e})}}}}});